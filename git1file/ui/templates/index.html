<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🗜️ Git1File — Repository Analyzer for LLMs</title>
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <header>
        <h1>🗜️ Git1File</h1>
        <p>Convert any Git repository into a single AI-friendly file</p>
    </header>

    <main>
        <section class="input-section">
            <form id="analyzeForm">
                <div class="form-group">
                    <label for="source">Repository URL or Local Path</label>
                    <input
                        type="text"
                        id="source"
                        placeholder="https://github.com/user/repo or /path/to/project"
                        required
                    >
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="format">Output Format</label>
                        <select id="format">
                            <option value="plain" selected>Plain Text (Recommended)</option>
                            <option value="xml">XML</option>
                            <option value="json">JSON</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="mode">Scan Mode</label>
                        <select id="mode">
                            <option value="smart" selected>Smart (Fast, skips large/known files)</option>
                            <option value="full">Full (Slow, includes everything)</option>
                        </select>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="includeMarkdown" name="includeMarkdown">
                        <label for="includeMarkdown">Include Markdown Files (e.g., README.md)</label>
                    </div>
                </div>

                <!-- Добавлен ID "analyzeButton" к кнопке -->
                <button type="submit" class="btn-primary" id="analyzeButton">
                    <span id="btn-text">Analyze Repository</span>
                    <div id="spinner" class="spinner hidden"></div>
                </button>
            </form>
        </section>

        <section class="stats-section hidden" id="statsSection">
            <!-- Content for statistics section -->
            <div class="section-header">
                <h3>Analysis Statistics</h3>
            </div>
            <div id="statsGrid" class="stats-grid">
                <!-- Stats will be injected here by JS -->
            </div>

            <!-- Markdown Summary Section -->
            <div id="markdownInfo" class="markdown-info hidden">
                <p>Found <span id="markdownCount" class="font-bold">0</span> Markdown files (<span id="markdownSize">0 KB</span>). They were excluded from the main output.</p>
                <div class="markdown-actions">
                    <button id="downloadMarkdownBtn" class="btn-markdown-secondary">
                        📥 Download Markdown Files
                    </button>
                    <button id="includeMarkdownBtn" class="btn-markdown-secondary">
                        ➕ Include in Next Analysis
                    </button>
                </div>
            </div>
        </section>

        <section class="output-section hidden" id="outputSection">
            <div class="section-header">
                <h3>Generated Output</h3>
                <div class="actions">
                    <button id="copyBtn" class="btn-secondary">📋 Copy</button>
                    <button id="downloadBtn" class="btn-secondary">💾 Download</button>
                </div>
            </div>
            <pre id="output"><code></code></pre>
            <div class="token-estimate">
                <span id="tokenCount">0</span> tokens estimated
            </div>
        </section>

        <section class="features">
            <h3>Features</h3>
            <ul>
                <li>📝 Markdown files excluded by default (saves tokens)</li>
                <li>📦 Plain text saves 16%+ tokens vs XML</li>
                <li>🚫 Automatic binary file exclusion</li>
                <li>⚡ Fast parallel processing</li>
                <li>🔒 Supports private repositories</li>
            </ul>
        </section>
    </main>

    <footer>
        <p>Git1File v0.1.0 | <a href="/docs">API Docs</a> | <a href="/api/v1/config/template">Config Template</a></p>
    </footer>

    <script src="/static/js/app.js"></script>
</body>
</html>